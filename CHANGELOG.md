# Changelog

## [1.0.4] - 2024-02-18
### Changed
+ Изменена логика работы с конфигурацией. Загрузка данных конфигурации производится один раз в переменную config_data.
### Added
+ Возможность ввести ID коннектора при его регистрации с помощью [add_connector](tools/add_connector.py).

## [1.0.3] - 2024-02-17
### Changed
ВАЖНО! Изменена структура конфигурационного файла. Перед обновлением ознакомьтесь с [примером](example/I29bPabawXtNqRtz4Q76.json). Есть два варианта привести конфигурационные файлы к новому формату: переделать вручную или переустановить приложение.
### Added
+  Поддержка в одном конфигурационном файле (то есть в одном локальном приложении Битрикс24) неограниченного количества коннекторов и открытых линий #1.
+  При отключении или удалении открытой линии в панели Битрикс24, производится очистка записей в конфигурации.
+  Поддержка неограниченного количества внешних каналов (мессенджеров). Будьте внимательны - на каждый подключенный мессенджер должна быть привязана разная пара коннектор+линия
+ Добавлен скрипт для добавления в конфигурацию параметров подключения [whatsapp](tools/add_whatsapp.py)

## [1.0.2] - 2024-02-16
### Added
+  Обработка входящих сообщений WhatsApp тип video
+  Отправка медиафайлов из Битрикс24 в WhatsApp
+ Changed - Изменён механизм регистрации коннектора. Предварительно проводится проверка зарегистрированных PLACEMENT_HANDLER

## [1.0.1] - 2024-02-15
### Added
+  ~~Обработка ONIMCONNECTORLINEDELETE. При удалении открытой линии, удаляется коннектор.~~
+  Загрузка полученных файлов в хранилище приложения с последующей отправкой в чат открытой линии
+  Обработка входящих сообщений WhatsApp типов contacts, audio, image, document
+  В скрипт [add_connector](tools/add_connector.py) добавлен функционал получения Id хранилища локального приложения
+  В скрипт [add_connector](tools/add_connector.py) добавлена подписка на события OnImConnectorLineDelete и OnImConnectorStatusDelete
+ Fixed - Удалены двойные слешы в [add_connector](tools/add_connector.py) в запросах, приводящие к ошибке в коробке 
```
{'error': 'NO_AUTH_FOUND', 'error_description': 'Wrong authorization data'} 
```

## [1.0.0] - 2024-02-11
### Added
+  [crest.py](crest.py) и базовый функционал для регистрации и подключения коннектора Битрикс24
